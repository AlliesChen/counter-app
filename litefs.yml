# This directory is where your application will access the database.
fuse:
  dir: "${LITEFS_DIR}"

# This directory is where LiteFS will store internal data.
# You must place this directory on a persistent volume.
data:
  dir: "/data/litefs"

proxy:
  addr: "${INTERNAL_PORT}"
  target: "localhost:${PORT}"
  db: "${DATABASE_FILENAME}"

lease:
  # Required. Must be either "consul" or "static".
  type: "consul"

  # Required. The URL for the primary node's LiteFS API.
  # Note: replace `primary` with the appropriate hostname for your primary node!
  advertise-url: "http://${HOSTNAME}.vm.${FLY_APP_NAME}.internal:20202"

  # Specifies whether the node can become the primary. If using
  # "static" leasing, this should be set to true on the primary
  # and false on the replicas.
  # Note: update this to `false` on the replica nodes!
  candidate: ${FLY_REGION == 'nrt'}
  
  consul:
    url: "${FLY_CONSUL_URL}"
    key: "litefs/${FLY_APP_NAME}"
